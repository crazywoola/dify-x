<!doctype html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dify x Hong Kong OSS Workshop - 从入门到生产</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/reset.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/reveal.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/theme/white.css" id="theme">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/highlight/github.css">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700&family=JetBrains+Mono&display=swap" rel="stylesheet">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="lang-switch">
        <a class="active" href="index.html">中文</a>
        <span>/</span>
        <a href="index_en.html">EN</a>
    </div>

    <div class="nordic-logo">
        <img src="../assets/logo.svg" alt="Dify" class="nordic-logo-img">
        <span class="nordic-logo-text">Dify x HK OSS</span>
    </div>

    <div class="reveal">
        <div class="slides">
            
            <!-- Slide 1: Title -->
            <section data-background-color="#fafafa">
                <div class="slide-hero text-center" style="max-width: 860px;">
                    <div style="margin-bottom: 1.5rem;">
                        <span class="tag tag-primary">Workshop 2025</span>
                    </div>
                    <h1>Dify x Hong Kong OSS</h1>
                    <p class="slide-subtitle" style="margin: 1rem auto 0; max-width: 520px;">
                        从入门到生产：构建 GenAI 应用
                    </p>
                    <p class="text-muted" style="font-size: var(--type-base); margin-top: 0.6rem; max-width: 560px; margin-left: auto; margin-right: auto; line-height: 1.5;">
                        基于 Dify 平台的工作流编排、知识库管理与生产部署实践
                    </p>
                    <div class="author-block" style="align-items: center;">
                        <div class="author-name">CrazyWoola (Banana)</div>
                        <div class="author-meta">Developer Relations @ Dify</div>
                        <div class="author-email">banana@dify.ai</div>
                    </div>
                </div>
                <aside class="notes">
                    准备提示：
                    1) 提前 30 分钟检查投屏比例与网络，确认现场可访问 Dify 和演示数据。
                    2) 打开并预热所有 Demo 页面，避免首次请求延迟。
                    3) 准备一套截图兜底，网络波动时直接切换到截图讲解。
                    开场控制在 90 秒内：自我介绍 + 听众今天能带走什么。
                </aside>
            </section>

            <!-- Slide 2: Agenda -->
            <section>
                <div class="slide-content">
                    <h2>Workshop 议程</h2>
                    <div class="nordic-grid nordic-grid-2" style="gap: 0.6rem; margin-top: 1.5rem;">
                        <div class="agenda-item">
                            <span class="agenda-num">01</span>
                            <div class="agenda-body">
                                <div class="agenda-title">开场与目标</div>
                                <div class="agenda-desc">听众背景对齐、今天的核心产出</div>
                            </div>
                            <span class="time-badge">5min</span>
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-num">02</span>
                            <div class="agenda-body">
                                <div class="agenda-title">Dify 与 LLM 原生开发</div>
                                <div class="agenda-desc">平台定位、应用类型、为什么现在</div>
                            </div>
                            <span class="time-badge">8min</span>
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-num">03</span>
                            <div class="agenda-body">
                                <div class="agenda-title">Workflow 核心</div>
                                <div class="agenda-desc">节点职责、编排模式、端到端演示</div>
                            </div>
                            <span class="time-badge">12min</span>
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-num">04</span>
                            <div class="agenda-body">
                                <div class="agenda-title">Knowledge / RAG 核心</div>
                                <div class="agenda-desc">分块策略、检索优化、质量评估</div>
                            </div>
                            <span class="time-badge">10min</span>
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-num">05</span>
                            <div class="agenda-body">
                                <div class="agenda-title">生产化要点</div>
                                <div class="agenda-desc">部署、安全护栏、可观测性配置</div>
                            </div>
                            <span class="time-badge">6min</span>
                        </div>
                        <div class="agenda-item">
                            <span class="agenda-num">06</span>
                            <div class="agenda-body">
                                <div class="agenda-title">案例与 Q&A</div>
                                <div class="agenda-desc">Apple Watch / GDPR 案例串讲 + 答疑</div>
                            </div>
                            <span class="time-badge">4min</span>
                        </div>
                    </div>
                    <div style="margin-top: 1rem; display: flex; align-items: center; justify-content: flex-end; gap: 0.5rem;">
                        <span class="text-muted" style="font-size: var(--type-sm);">合计</span>
                        <span class="time-badge">45 min</span>
                    </div>
                </div>
                <aside class="notes">
                    时间控制提示：
                    - 20 分钟时应进入 Workflow 的演示或总结。
                    - 35 分钟时必须切到案例与收尾，不再展开深度理论。
                    准备提示：
                    - 现场开一个静音计时器，设置 20 / 35 / 42 分钟提醒。
                    - 提前准备 Demo 失败时的兜底话术和截图顺序。
                    - 提问较多时使用 parking lot，承诺会后统一回复。
                </aside>
            </section>

            <!-- Section: Introduction -->
            <section>
                <!-- Slide 3: What is Dify -->
                <section data-background-color="#fafafa">
                    <div class="slide-hero">
                        <div class="mb-4">
                            <span class="section-tag">Part 1</span>
                        </div>
                        <h2>什么是 Dify？</h2>
                        <p class="slide-subtitle">
                            Dify 是开源的 LLM 应用开发平台，连接大模型能力与生产级应用。
                        </p>
                        
                        <div class="nordic-grid nordic-grid-2 slide-grid">
                            <div class="nordic-feature">
                                <div class="nordic-feature-icon"><i class="ri-flow-chart"></i></div>
                                <div class="nordic-feature-content">
                                    <div class="nordic-feature-title">可视化编排</div>
                                    <div class="nordic-feature-desc">Workflow、Agent、Chatflow 多模式工作流构建</div>
                                </div>
                            </div>
                            <div class="nordic-feature">
                                <div class="nordic-feature-icon"><i class="ri-database-2-line"></i></div>
                                <div class="nordic-feature-content">
                                    <div class="nordic-feature-title">知识库管理</div>
                                    <div class="nordic-feature-desc">RAG 全流程支持，从文档到向量化检索</div>
                                </div>
                            </div>
                            <div class="nordic-feature">
                                <div class="nordic-feature-icon"><i class="ri-plug-line"></i></div>
                                <div class="nordic-feature-content">
                                    <div class="nordic-feature-title">插件生态</div>
                                    <div class="nordic-feature-desc">模型、工具、扩展的开放插件市场</div>
                                </div>
                            </div>
                            <div class="nordic-feature">
                                <div class="nordic-feature-icon"><i class="ri-bar-chart-2-line"></i></div>
                                <div class="nordic-feature-content">
                                    <div class="nordic-feature-title">可观测性</div>
                                    <div class="nordic-feature-desc">全链路日志、Tracing、成本追踪</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 4: Community Stats -->
                <section>
                    <div class="slide-content">
                        <h2>全球社区数据</h2>
                        <p class="slide-desc">开源生态驱动，GitHub Top 100 项目</p>
                        
                        <div class="nordic-grid nordic-grid-3" style="gap: 1.5rem;">
                            <div class="nordic-stat">
                                <div class="nordic-stat-number">1M+</div>
                                <div class="nordic-stat-label">Powered by Dify</div>
                            </div>
                            <div class="nordic-stat">
                                <div class="nordic-stat-number">130K+</div>
                                <div class="nordic-stat-label">GitHub Stars</div>
                            </div>
                            <div class="nordic-stat">
                                <div class="nordic-stat-number">150+</div>
                                <div class="nordic-stat-label">覆盖国家</div>
                            </div>
                            <div class="nordic-stat">
                                <div class="nordic-stat-number">1000+</div>
                                <div class="nordic-stat-label">开源贡献者</div>
                            </div>
                            <div class="nordic-stat">
                                <div class="nordic-stat-number">60+</div>
                                <div class="nordic-stat-label">行业应用</div>
                            </div>
                            <div class="nordic-stat">
                                <div class="nordic-stat-number">550M+</div>
                                <div class="nordic-stat-label">总下载量</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 5: Evolution -->
                <section>
                    <div class="slide-content">
                        <h2>LLM 应用开发生命周期</h2>
                        
                        <div class="nordic-timeline">
                            <div class="nordic-timeline-items">
                                <div class="nordic-timeline-item">
                                    <div class="nordic-timeline-year">2017</div>
                                    <div class="nordic-timeline-title">Transformer</div>
                                    <div class="nordic-timeline-desc">Attention is all you need</div>
                                </div>
                                <div class="nordic-timeline-item">
                                    <div class="nordic-timeline-year">2020</div>
                                    <div class="nordic-timeline-title">GPT-3</div>
                                    <div class="nordic-timeline-desc">Few-shot 涌现能力</div>
                                </div>
                                <div class="nordic-timeline-item active">
                                    <div class="nordic-timeline-year">2023-24</div>
                                    <div class="nordic-timeline-title">应用框架</div>
                                    <div class="nordic-timeline-desc">Dify 等平台崛起</div>
                                </div>
                                <div class="nordic-timeline-item">
                                    <div class="nordic-timeline-year">2025+</div>
                                    <div class="nordic-timeline-title">工程化</div>
                                    <div class="nordic-timeline-desc">生产级、标准化</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="nordic-card insight-row" style="margin-top: 2.5rem;">
                            <div class="icon-badge"><i class="ri-lightbulb-line"></i></div>
                            <div class="insight-row-content">
                                <div class="insight-title">为什么是现在？</div>
                                <div class="insight-desc">算力、模型、数据三大要素齐备，LLM 应用进入工程化阶段</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 6: Comparison -->
                <section>
                    <div class="slide-content">
                        <h2>传统开发 vs LLM 原生开发</h2>
                        
                        <div class="nordic-comparison">
                            <div class="nordic-comparison-item">
                                <div class="flex items-center gap-3 mb-4">
                                    <i class="ri-code-s-slash-line text-2xl text-gray-400"></i>
                                    <h3 class="text-lg font-semibold">传统软件开发</h3>
                                </div>
                                <table class="w-full text-sm">
                                    <tr class="border-b border-gray-200">
                                        <td class="py-3"><span class="bg-gray-200 px-2 py-1 rounded text-xs">核心逻辑</span></td>
                                        <td class="py-3 text-secondary">确定性 (Deterministic)<br>If-Then-Else 严密控制</td>
                                    </tr>
                                    <tr class="border-b border-gray-200">
                                        <td class="py-3"><span class="bg-gray-200 px-2 py-1 rounded text-xs">数据处理</span></td>
                                        <td class="py-3 text-secondary">结构化 (SQL/JSON)<br>Schema 定义先行</td>
                                    </tr>
                                    <tr>
                                        <td class="py-3"><span class="bg-gray-200 px-2 py-1 rounded text-xs">测试方法</span></td>
                                        <td class="py-3 text-secondary">单元测试 (Pass/Fail)<br>逻辑覆盖率</td>
                                    </tr>
                                </table>
                            </div>
                            
                            <div class="nordic-comparison-item active">
                                <div class="flex items-center gap-3 mb-4">
                                    <i class="ri-magic-line text-2xl text-dify"></i>
                                    <h3 class="text-lg font-semibold text-dify">LLM 原生开发</h3>
                                </div>
                                <table class="w-full text-sm">
                                    <tr class="border-b border-blue-200">
                                        <td class="py-3"><span class="bg-dify text-white px-2 py-1 rounded text-xs">核心逻辑</span></td>
                                        <td class="py-3 text-secondary">概率性 (Probabilistic)<br>Prompt + Context 引导</td>
                                    </tr>
                                    <tr class="border-b border-blue-200">
                                        <td class="py-3"><span class="bg-dify text-white px-2 py-1 rounded text-xs">数据处理</span></td>
                                        <td class="py-3 text-secondary">非结构化 (Embedding)<br>语义检索与理解</td>
                                    </tr>
                                    <tr>
                                        <td class="py-3"><span class="bg-dify text-white px-2 py-1 rounded text-xs">测试方法</span></td>
                                        <td class="py-3 text-secondary">评估 (Eval)<br>准确率、幻觉率、相关性</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Section: Workflow -->
            <section>
                <!-- Slide 7: Workflow Intro -->
                <section data-background-color="#fafafa">
                    <div class="slide-hero">
                        <div class="mb-4">
                            <span class="section-tag">Part 2</span>
                        </div>
                        <h2>Workflow 工作流编排</h2>
                        <p class="slide-subtitle">
                            可视化构建复杂的 AI 处理流程，从简单对话到多步骤自动化。
                        </p>
                        
                        <div class="nordic-flow slide-grid">
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number">1</div>
                                <div class="nordic-flow-title">输入定义</div>
                                <div class="nordic-flow-desc">Schema 校验</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number">2</div>
                                <div class="nordic-flow-title">知识检索</div>
                                <div class="nordic-flow-desc">RAG 增强</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number">3</div>
                                <div class="nordic-flow-title">LLM 处理</div>
                                <div class="nordic-flow-desc">智能生成</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number">4</div>
                                <div class="nordic-flow-title">输出格式化</div>
                                <div class="nordic-flow-desc">结果返回</div>
                            </div>
                        </div>
                    </div>
                    <aside class="notes">
                        这一页控制在 90 秒内，只讲工作流四步心智模型。
                        演示准备：提前准备一个最小可运行 Workflow（输入、检索、LLM、输出四节点），确保能在 3 分钟内走通一次。
                        过渡语：下一页进入应用类型，解释为什么同一平台支持不同复杂度场景。
                    </aside>
                </section>

                <!-- Slide 8: Workflow Types -->
                <section>
                    <div class="slide-content">
                        <h2>四种应用类型</h2>
                        
                        <div class="nordic-grid nordic-grid-2">
                            <div class="nordic-card">
                                <div class="flex items-center justify-between mb-3">
                                    <h3 class="font-semibold text-lg">Chatbot</h3>
                                    <span class="tag text-xs">低复杂度</span>
                                </div>
                                <p class="text-secondary text-sm mb-3">对话式 AI，保持上下文记忆，适合客服、问答场景</p>
                                <div class="flex gap-2 text-xs text-muted">
                                    <span><i class="ri-chat-3-line mr-1"></i>多轮对话</span>
                                    <span><i class="ri-history-line mr-1"></i>上下文保持</span>
                                </div>
                            </div>
                            
                            <div class="nordic-card">
                                <div class="flex items-center justify-between mb-3">
                                    <h3 class="font-semibold text-lg">Agent</h3>
                                    <span class="tag text-xs">中复杂度</span>
                                </div>
                                <p class="text-secondary text-sm mb-3">自主任务执行，工具调用能力，适合研究、分析场景</p>
                                <div class="flex gap-2 text-xs text-muted">
                                    <span><i class="ri-tools-line mr-1"></i>工具调用</span>
                                    <span><i class="ri-brain-line mr-1"></i>自主决策</span>
                                </div>
                            </div>
                            
                            <div class="nordic-card-featured">
                                <div class="flex items-center justify-between mb-3">
                                    <h3 class="font-semibold text-lg">Chatflow</h3>
                                    <span class="tag bg-white text-dify text-xs">高复杂度</span>
                                </div>
                                <p class="text-sm mb-3 opacity-90">多轮对话流程，条件分支处理，适合表单、向导场景</p>
                                <div class="flex gap-2 text-xs opacity-80">
                                    <span><i class="ri-git-branch-line mr-1"></i>流程分支</span>
                                    <span><i class="ri-guide-line mr-1"></i>步骤引导</span>
                                </div>
                            </div>
                            
                            <div class="nordic-card-featured">
                                <div class="flex items-center justify-between mb-3">
                                    <h3 class="font-semibold text-lg">Workflow</h3>
                                    <span class="tag bg-white text-dify text-xs">高复杂度</span>
                                </div>
                                <p class="text-sm mb-3 opacity-90">批量处理、自动化任务，无状态执行，适合数据处理场景</p>
                                <div class="flex gap-2 text-xs opacity-80">
                                    <span><i class="ri-loop-left-line mr-1"></i>批量处理</span>
                                    <span><i class="ri-flashlight-line mr-1"></i>自动化</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 9: Node Types -->
                <section>
                    <div class="slide-content">
                        <h2>核心节点类型</h2>
                        
                        <table class="nordic-table">
                            <thead>
                                <tr>
                                    <th style="width: 120px;">分类</th>
                                    <th style="width: 150px;">节点</th>
                                    <th>功能说明</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td rowspan="2" class="font-semibold">输入/输出</td>
                                    <td><i class="ri-play-circle-line text-dify mr-2"></i>Start</td>
                                    <td class="text-secondary">定义输入参数 Schema，触发工作流执行</td>
                                </tr>
                                <tr>
                                    <td><i class="ri-stop-circle-line text-dify mr-2"></i>End</td>
                                    <td class="text-secondary">定义输出格式，终止工作流</td>
                                </tr>
                                <tr>
                                    <td rowspan="2" class="font-semibold">处理</td>
                                    <td><i class="ri-code-box-line text-dify mr-2"></i>Code</td>
                                    <td class="text-secondary">Python/Node.js 代码执行，数据转换</td>
                                </tr>
                                <tr>
                                    <td><i class="ri-template-line text-dify mr-2"></i>Template</td>
                                    <td class="text-secondary">字符串模板渲染，Prompt 构建</td>
                                </tr>
                                <tr>
                                    <td rowspan="2" class="font-semibold">AI</td>
                                    <td><i class="ri-robot-2-line text-dify mr-2"></i>LLM</td>
                                    <td class="text-secondary">大模型调用，支持多供应商、参数配置</td>
                                </tr>
                                <tr>
                                    <td><i class="ri-database-2-line text-dify mr-2"></i>Knowledge</td>
                                    <td class="text-secondary">知识库检索，RAG 上下文注入</td>
                                </tr>
                                <tr>
                                    <td rowspan="2" class="font-semibold">控制流</td>
                                    <td><i class="ri-git-branch-line text-dify mr-2"></i>If/Else</td>
                                    <td class="text-secondary">条件分支，基于表达式的路由</td>
                                </tr>
                                <tr>
                                    <td><i class="ri-loop-left-line text-dify mr-2"></i>Iteration</td>
                                    <td class="text-secondary">列表迭代，批量处理数据</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <!-- Slide 10: Observability -->
                <section>
                    <div class="slide-content">
                        <h2>可观测性与调试</h2>
                        
                        <div class="nordic-card" style="margin-bottom: 1.5rem;">
                            <div class="font-mono text-xs text-muted mb-3">Execution Trace • Run ID: wf_8f3a9b2c</div>
                            <div class="space-y-2 text-sm">
                                <div class="flex items-center gap-3 p-2 bg-green-50 rounded">
                                    <span class="text-green-600"><i class="ri-check-line"></i></span>
                                    <span class="font-mono text-xs w-24">0.01s</span>
                                    <span class="font-medium">Start</span>
                                    <span class="text-secondary text-xs">Input validated</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 bg-green-50 rounded">
                                    <span class="text-green-600"><i class="ri-check-line"></i></span>
                                    <span class="font-mono text-xs w-24">0.45s</span>
                                    <span class="font-medium">Knowledge Retrieval</span>
                                    <span class="text-secondary text-xs">3 chunks retrieved (score > 0.75)</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 bg-green-50 rounded">
                                    <span class="text-green-600"><i class="ri-check-line"></i></span>
                                    <span class="font-mono text-xs w-24">0.78s</span>
                                    <span class="font-medium">LLM Call</span>
                                    <span class="text-secondary text-xs">342 tokens generated</span>
                                </div>
                                <div class="flex items-center gap-3 p-2 bg-blue-50 rounded border border-blue-200">
                                    <span class="text-blue-600"><i class="ri-flag-line"></i></span>
                                    <span class="font-mono text-xs w-24">1.24s</span>
                                    <span class="font-medium">End</span>
                                    <span class="text-secondary text-xs">Execution complete</span>
                                </div>
                            </div>
                            <div class="mt-4 pt-3 border-t border-gray-200 flex justify-between text-xs text-muted">
                                <span>Tokens: 1,245 prompt | 342 completion</span>
                                <span>Cost: $0.0042</span>
                            </div>
                        </div>
                        
                        <div class="nordic-grid nordic-grid-3" style="gap: 1rem;">
                            <div class="text-center p-4 bg-gray-50 rounded-lg">
                                <i class="ri-eye-line text-dify text-xl mb-2 block"></i>
                                <div class="font-semibold text-sm">变量检查器</div>
                                <div class="text-xs text-muted">每步变量值查看</div>
                            </div>
                            <div class="text-center p-4 bg-gray-50 rounded-lg">
                                <i class="ri-restart-line text-dify text-xl mb-2 block"></i>
                                <div class="font-semibold text-sm">节点重试</div>
                                <div class="text-xs text-muted">失败节点重新执行</div>
                            </div>
                            <div class="text-center p-4 bg-gray-50 rounded-lg">
                                <i class="ri-file-list-3-line text-dify text-xl mb-2 block"></i>
                                <div class="font-semibold text-sm">差异对比</div>
                                <div class="text-xs text-muted">多轮执行对比</div>
                            </div>
                        </div>
                    </div>
                </section>

            </section>

            <!-- Section: Knowledge -->
            <section>
                <!-- Slide 11: Knowledge Intro -->
                <section data-background-color="#fafafa">
                    <div class="slide-hero">
                        <div class="mb-4">
                            <span class="section-tag">Part 3</span>
                        </div>
                        <h2>Knowledge 知识库</h2>
                        <p class="slide-subtitle">
                            完整的 RAG 解决方案：从文档摄入到智能检索的全流程管理。
                        </p>
                        
                        <div class="nordic-grid nordic-grid-2" style="margin-top: 2rem; gap: 1rem;">
                            <div class="nordic-card">
                                <div class="font-semibold text-sm mb-3"><i class="ri-upload-cloud-2-line text-dify mr-2"></i>Ingest Pipeline</div>
                                <div class="pipeline-board">
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">1. 文档接入</span>
                                        <span class="pipeline-step-meta">PDF / DOCX / MD</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">2. 分块策略</span>
                                        <span class="pipeline-step-meta">Recursive / Semantic / Markdown</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">3. 向量化</span>
                                        <span class="pipeline-step-meta">text-embedding-3-large</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">4. 向量存储</span>
                                        <span class="pipeline-step-meta">Weaviate / Milvus / Qdrant</span>
                                    </div>
                                </div>
                            </div>
                            <div class="nordic-card">
                                <div class="font-semibold text-sm mb-3"><i class="ri-search-eye-line text-dify mr-2"></i>Query Pipeline</div>
                                <div class="pipeline-board">
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">1. Query Rewrite</span>
                                        <span class="pipeline-step-meta">统一意图 + 补全上下文</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">2. Hybrid Search</span>
                                        <span class="pipeline-step-meta">向量检索 + 关键词检索</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">3. Rerank</span>
                                        <span class="pipeline-step-meta">重排 Top-K 候选片段</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">4. Context Assembly</span>
                                        <span class="pipeline-step-meta">拼接上下文后送入 LLM</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="info-banner">
                            <i class="ri-focus-3-line info-banner-icon"></i>
                            <div>关键结论：Ingest 决定召回上限，Query 决定最终答案质量。</div>
                        </div>
                    </div>
                    <aside class="notes">
                        重点强调一句：RAG 质量上限由文档质量与分块策略决定。
                        准备提示：带 1 个“坏分块”与 1 个“好分块”样例，对比召回结果更直观。
                        时间不够时，后续的评估指标只保留 Recall、Faithfulness 两个核心指标。
                    </aside>
                </section>

                <!-- Slide 12: Chunking Strategies -->
                <section>
                    <div class="slide-content">
                        <h2>分块策略</h2>
                        
                        <table class="nordic-table">
                            <thead>
                                <tr>
                                    <th>策略</th>
                                    <th>适用场景</th>
                                    <th>分块大小</th>
                                    <th>重叠</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="font-semibold">Recursive</td>
                                    <td class="text-secondary">通用文档处理</td>
                                    <td>500-1000 chars</td>
                                    <td>50-100</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold">Semantic</td>
                                    <td class="text-secondary">技术内容、代码</td>
                                    <td>句子级别</td>
                                    <td>N/A</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold">Fixed</td>
                                    <td class="text-secondary">结构化数据</td>
                                    <td>自定义</td>
                                    <td>0</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold">Markdown</td>
                                    <td class="text-secondary">文档、Wiki</td>
                                    <td>标题层级</td>
                                    <td>上下文</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="nordic-card mt-6">
                            <div class="font-semibold text-sm mb-2"><i class="ri-settings-3-line text-dify mr-2"></i>推荐配置</div>
                            <div class="nordic-grid nordic-grid-2" style="gap: 1rem;">
                                <div>
                                    <div class="text-xs text-muted mb-2 font-semibold">CHUNKING</div>
                                    <div class="kv-list">
                                        <div class="kv-item"><span class="kv-key">method</span><span class="kv-value">recursive</span></div>
                                        <div class="kv-item"><span class="kv-key">chunk_size</span><span class="kv-value">800</span></div>
                                        <div class="kv-item"><span class="kv-key">chunk_overlap</span><span class="kv-value">80</span></div>
                                        <div class="kv-item"><span class="kv-key">separators</span><span class="kv-value">\\n\\n, \\n, . , 空格</span></div>
                                    </div>
                                </div>
                                <div>
                                    <div class="text-xs text-muted mb-2 font-semibold">INDEXING</div>
                                    <div class="kv-list">
                                        <div class="kv-item"><span class="kv-key">embedding_model</span><span class="kv-value">text-embedding-3-large</span></div>
                                        <div class="kv-item"><span class="kv-key">vector_db</span><span class="kv-value">weaviate</span></div>
                                        <div class="kv-item"><span class="kv-key">rerank</span><span class="kv-value">enabled</span></div>
                                        <div class="kv-item"><span class="kv-key">top_k</span><span class="kv-value">5</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 13: Retrieval -->
                <section>
                    <div class="slide-content">
                        <h2>检索优化</h2>
                        
                        <div class="nordic-grid nordic-grid-2">
                            <div>
                                <h3 class="font-semibold mb-3">基础检索</h3>
                                <div class="nordic-card">
                                    <div class="kv-list">
                                        <div class="kv-item"><span class="kv-key">method</span><span class="kv-value">semantic_search</span></div>
                                        <div class="kv-item"><span class="kv-key">top_k</span><span class="kv-value">5</span></div>
                                        <div class="kv-item"><span class="kv-key">score_threshold</span><span class="kv-value">0.75</span></div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3 class="font-semibold mb-3">混合检索 + Rerank</h3>
                                <div class="nordic-card">
                                    <div class="kv-list">
                                        <div class="kv-item"><span class="kv-key">method</span><span class="kv-value">hybrid_search</span></div>
                                        <div class="kv-item"><span class="kv-key">top_k</span><span class="kv-value">20 (初筛)</span></div>
                                        <div class="kv-item"><span class="kv-key">rerank_model</span><span class="kv-value">cohere-rerank-v3</span></div>
                                        <div class="kv-item"><span class="kv-key">top_n</span><span class="kv-value">5 (最终)</span></div>
                                        <div class="kv-item"><span class="kv-key">filter</span><span class="kv-value">metadata.source = official_docs</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="nordic-grid nordic-grid-3" style="gap: 1rem; margin-top: 2rem;">
                            <div class="text-center p-4 border border-gray-200 rounded-lg">
                                <i class="ri-fingerprint-line text-dify text-2xl mb-2 block"></i>
                                <div class="font-semibold text-sm">语义搜索</div>
                                <div class="text-xs text-muted">基于向量相似度</div>
                            </div>
                            <div class="text-center p-4 border border-gray-200 rounded-lg">
                                <i class="ri-text-spacing text-dify text-2xl mb-2 block"></i>
                                <div class="font-semibold text-sm">关键词搜索</div>
                                <div class="text-xs text-muted">BM25 算法</div>
                            </div>
                            <div class="text-center p-4 border border-dify rounded-lg bg-dify-light">
                                <i class="ri-bubble-chart-line text-dify text-2xl mb-2 block"></i>
                                <div class="font-semibold text-sm">混合搜索</div>
                                <div class="text-xs text-muted">语义 + 关键词</div>
                            </div>
                        </div>
                    </div>
                </section>

            </section>

            <!-- Section: Deployment -->
            <section>
                <!-- Slide 14: Deployment -->
                <section data-background-color="#fafafa">
                    <div class="slide-hero">
                        <div class="mb-4">
                            <span class="section-tag">Part 4</span>
                        </div>
                        <h2>部署与集成</h2>
                        <p class="slide-subtitle">
                            使用 Docker 快速部署 Dify，配置生产环境。
                        </p>
                        
                        <pre class="code-block" style="margin-top: 2rem;"><code>
# 1. 克隆仓库
git clone https://github.com/langgenius/dify.git
cd dify/docker

# 2. 配置环境变量
cp .env.example .env
# 编辑 .env 设置 OPENAI_API_KEY, SECRET_KEY 等

# 3. 启动服务
docker compose up -d

# 4. 访问控制台
open http://localhost/install
                        </code></pre>
                    </div>
                    <aside class="notes">
                        这一页强调“先跑起来，再谈高可用”，避免陷入运维细节。
                        准备提示：演示前一天在全新环境执行一次安装命令，确认文档和实际步骤一致。
                        如果现场没有 Docker 环境，改用截图讲“关键配置项 + 常见错误”。
                    </aside>
                </section>

                <!-- Slide 15: Production Architecture -->
                <section>
                    <div class="slide-content">
                        <h2>生产架构</h2>
                        
                        <div class="nordic-grid nordic-grid-2" style="gap: 1.5rem; align-items: start;">
                            <div class="arch-board">
                                <div class="arch-tier">
                                    <div class="arch-tier-title">入口层</div>
                                    <div class="chip-list">
                                        <span class="chip">CDN / WAF</span>
                                        <span class="chip">Nginx Load Balancer</span>
                                    </div>
                                </div>
                                <div class="arch-tier">
                                    <div class="arch-tier-title">应用层</div>
                                    <div class="chip-list">
                                        <span class="chip">Dify API (Multi Pods)</span>
                                        <span class="chip">Web / Console</span>
                                        <span class="chip">Worker Nodes</span>
                                    </div>
                                </div>
                                <div class="arch-tier">
                                    <div class="arch-tier-title">数据层</div>
                                    <div class="chip-list">
                                        <span class="chip">PostgreSQL (HA)</span>
                                        <span class="chip">Redis (Sentinel)</span>
                                        <span class="chip">Weaviate / Milvus Cluster</span>
                                    </div>
                                </div>
                                <div class="arch-tier">
                                    <div class="arch-tier-title">异步任务层</div>
                                    <div class="chip-list">
                                        <span class="chip">Celery Queue</span>
                                        <span class="chip">Scheduled Jobs</span>
                                        <span class="chip">Retry / Dead Letter</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-3">安全检查清单</h4>
                                <div class="checklist" style="font-size: 0.8em;">
                                    <li class="checked">修改默认密码</li>
                                    <li class="checked">启用 HTTPS / SSL 证书</li>
                                    <li>配置 CORS 策略</li>
                                    <li>设置限流策略</li>
                                    <li>开启审计日志</li>
                                    <li>网络隔离向量数据库</li>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 16: Environment -->
                <section>
                    <div class="slide-content">
                        <h2>关键环境变量</h2>
                        
                        <table class="nordic-table" style="font-size: 0.75em;">
                            <thead>
                                <tr>
                                    <th>变量</th>
                                    <th>说明</th>
                                    <th>示例值</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="font-mono text-dify">CONSOLE_API_URL</td>
                                    <td class="text-secondary">控制台 API 地址</td>
                                    <td class="font-mono text-xs">http://localhost:5001</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-dify">APP_API_URL</td>
                                    <td class="text-secondary">应用 API 地址</td>
                                    <td class="font-mono text-xs">http://localhost:5001</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-dify">DB_DATABASE</td>
                                    <td class="text-secondary">PostgreSQL 数据库名</td>
                                    <td class="font-mono text-xs">dify</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-dify">REDIS_HOST</td>
                                    <td class="text-secondary">Redis 主机</td>
                                    <td class="font-mono text-xs">redis</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-dify">VECTOR_STORE</td>
                                    <td class="text-secondary">向量数据库类型</td>
                                    <td class="font-mono text-xs">weaviate/qdrant/milvus</td>
                                </tr>
                                <tr>
                                    <td class="font-mono text-dify">S3_BUCKET_NAME</td>
                                    <td class="text-secondary">文件存储桶名</td>
                                    <td class="font-mono text-xs">dify-files</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

            </section>

            <!-- Section: Advanced Topics -->
            <section>
                <!-- Slide 17: Code Node Best Practices -->
                <section>
                    <div class="slide-content">
                        <h2>Code Node 最佳实践</h2>
                        <p class="slide-desc">使用 Python/Node.js 扩展 Workflow 能力</p>
                        
                        <div class="nordic-grid nordic-grid-2">
                            <div class="nordic-card">
                                <h4 class="font-semibold mb-3"><i class="ri-code-box-line text-dify mr-2"></i>适用场景</h4>
                                <ul class="text-sm text-secondary space-y-2">
                                    <li>• 复杂数据转换与清洗</li>
                                    <li>• 自定义业务逻辑判断</li>
                                    <li>• 调用外部算法模型</li>
                                    <li>• 敏感数据脱敏处理</li>
                                </ul>
                            </div>
                            <div class="nordic-card">
                                <h4 class="font-semibold mb-3"><i class="ri-shield-check-line text-dify mr-2"></i>安全限制</h4>
                                <ul class="text-sm text-secondary space-y-2">
                                    <li>• 执行超时：默认 60 秒</li>
                                    <li>• 内存限制：512 MB</li>
                                    <li>• 禁止网络请求（沙箱）</li>
                                    <li>• 标准库可用，三方库受限</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="nordic-card mt-4">
                            <div class="font-semibold text-sm mb-2"><i class="ri-code-s-slash-line text-dify mr-2"></i>示例：风险评分逻辑</div>
                            <pre class="code-block" style="font-size: 0.58em;"><code>
def main(payload: dict) -> dict:
    country = payload.get("country", "")
    score = payload.get("risk_score", 0)
    
    # 自定义路由逻辑
    if country in ["US", "UK"] and score &lt; 0.3:
        return {"route": "fast-lane", "reason": "low_risk"}
    elif score > 0.8:
        return {"route": "block", "reason": "high_risk"}
    
    return {"route": "standard", "score": score}
                            </code></pre>
                        </div>
                    </div>
                </section>

                <!-- Slide 18: Visual vs Pro-Code -->
                <section>
                    <div class="slide-content">
                        <h2>低代码 vs 专业代码</h2>
                        <p class="slide-desc">找到可视化编排与代码的最佳结合点</p>
                        
                        <table class="nordic-table" style="font-size: 0.75em;">
                            <thead>
                                <tr>
                                    <th style="width: 120px;">维度</th>
                                    <th>低代码编排 (DSL)</th>
                                    <th>专业代码 (Pro-Code)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="font-semibold">核心用途</td>
                                    <td class="text-secondary">流程编排、条件分支、RAG 管道</td>
                                    <td class="text-secondary">复杂算法、自定义业务逻辑</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold">交付速度</td>
                                    <td class="text-secondary">快速迭代，业务人员可参与</td>
                                    <td class="text-secondary">需要开发周期，但灵活性高</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold">可维护性</td>
                                    <td class="text-secondary">可视化直观，易于理解</td>
                                    <td class="text-secondary">需要文档，代码审查保障</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold">最佳实践</td>
                                    <td class="text-secondary" colspan="2"><span class="text-dify font-semibold">80% DSL + 20% Code</span> — 胶水逻辑用可视化，核心计算用代码</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div class="info-banner">
                            <i class="ri-lightbulb-line info-banner-icon"></i>
                            <div>
                                <div class="insight-title">黄金法则</div>
                                <div class="insight-desc">可视化负责「编排」，代码负责「计算」。两者通过变量无缝传递数据。</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 19: Plugin Ecosystem -->
                <section data-background-color="#fafafa">
                    <div class="slide-hero">
                        <div class="mb-4">
                            <span class="section-tag">Extension</span>
                        </div>
                        <h2>插件生态系统</h2>
                        <p class="slide-subtitle">
                            扩展 Dify 能力边界，集成第三方服务与自定义工具。
                        </p>
                        
                        <div class="nordic-grid nordic-grid-3" style="margin-top: 2.5rem; gap: 1.25rem;">
                            <div class="nordic-card text-center">
                                <i class="ri-database-2-line text-dify text-3xl mb-3 block"></i>
                                <h4 class="font-semibold mb-2">模型插件</h4>
                                <p class="text-sm text-secondary">接入 OpenAI、Claude、Llama 等 LLM</p>
                            </div>
                            <div class="nordic-card text-center">
                                <i class="ri-tools-line text-dify text-3xl mb-3 block"></i>
                                <h4 class="font-semibold mb-2">工具插件</h4>
                                <p class="text-sm text-secondary">Google 搜索、代码执行、数据库查询</p>
                            </div>
                            <div class="nordic-card text-center">
                                <i class="ri-upload-cloud-line text-dify text-3xl mb-3 block"></i>
                                <h4 class="font-semibold mb-2">Agent 策略</h4>
                                <p class="text-sm text-secondary">Function Calling、ReAct、计划执行</p>
                            </div>
                        </div>
                        
                        <div class="nordic-card" style="margin-top: 2rem;">
                            <div class="flex items-center justify-between">
                                <div>
                                    <div class="font-semibold mb-1">插件市场</div>
                                    <div class="text-sm text-secondary">官方维护 + 社区贡献，持续增长的工具生态</div>
                                </div>
                                <a href="https://marketplace.dify.ai" target="_blank" class="text-dify font-semibold text-sm hover:underline">
                                    访问市场 <i class="ri-arrow-right-line"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </section>
            </section>

            <!-- Section: Session 2 -->
            <section>
                <!-- Session 2 Title Slide -->
                <section data-background-color="#0033ff">
                    <div class="slide-hero text-center" style="color: white;">
                        <div class="mb-4">
                            <span class="section-tag" style="background: rgba(255,255,255,0.2); color: white; border-color: transparent;">Workshop</span>
                        </div>
                        <h1 style="color: white; font-size: 2.5rem;">Session 2</h1>
                        <p style="color: rgba(255,255,255,0.8); font-size: 1.1rem; margin-top: 1rem;">
                            深度进阶 · 动手实战
                        </p>
                        <div class="nordic-grid nordic-grid-2" style="margin-top: 2.5rem; gap: 1.25rem; text-align: left;">
                            <div style="background: rgba(255,255,255,0.12); border-radius: 0.75rem; padding: 1.25rem;">
                                <div style="font-weight: 600; margin-bottom: 0.5rem; color: white;">可选深入内容</div>
                                <div style="font-size: 0.82rem; color: rgba(255,255,255,0.75); line-height: 1.6;">RAG 评估 · Agent 架构 · Pipeline 解析<br>安全护栏 · 可观测性 · 调试技巧 · 社区</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.12); border-radius: 0.75rem; padding: 1.25rem;">
                                <div style="font-weight: 600; margin-bottom: 0.5rem; color: white;">实战项目</div>
                                <div style="font-size: 0.82rem; color: rgba(255,255,255,0.75); line-height: 1.6;">Apple Watch 录音转录工作流<br>GDPR 合规问答机器人</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 20: RAG Evaluation -->
                <section>
                    <div class="slide-content">
                        <h2>RAG 评估方法（可选深入）</h2>
                        <p class="slide-desc">系统化评估检索质量与生成效果</p>
                        
                        <div class="nordic-grid nordic-grid-2">
                            <div>
                                <h4 class="font-semibold mb-3"><i class="ri-fingerprint-line text-dify mr-2"></i>检索质量指标</h4>
                                <table class="nordic-table" style="font-size: 0.7em;">
                                    <tbody>
                                        <tr>
                                            <td class="font-semibold">召回率 (Recall)</td>
                                            <td class="text-secondary">相关文档被成功检索的比例</td>
                                        </tr>
                                        <tr>
                                            <td class="font-semibold">精确率 (Precision)</td>
                                            <td class="text-secondary">检索结果中相关文档的比例</td>
                                        </tr>
                                        <tr>
                                            <td class="font-semibold">MRR</td>
                                            <td class="text-secondary">首个相关文档的平均排名倒数</td>
                                        </tr>
                                        <tr>
                                            <td class="font-semibold">NDCG</td>
                                            <td class="text-secondary">考虑排序的加权相关性评分</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-3"><i class="ri-chat-check-line text-dify mr-2"></i>生成质量指标</h4>
                                <table class="nordic-table" style="font-size: 0.7em;">
                                    <tbody>
                                        <tr>
                                            <td class="font-semibold">忠实度</td>
                                            <td class="text-secondary">答案是否基于检索上下文</td>
                                        </tr>
                                        <tr>
                                            <td class="font-semibold">相关性</td>
                                            <td class="text-secondary">答案与问题的匹配程度</td>
                                        </tr>
                                        <tr>
                                            <td class="font-semibold">完整性</td>
                                            <td class="text-secondary">是否覆盖问题的各个方面</td>
                                        </tr>
                                        <tr>
                                            <td class="font-semibold">幻觉率</td>
                                            <td class="text-secondary">编造未提供的信息的比例</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="nordic-card mt-4" style="background: #fef3c7; border-color: #f59e0b;">
                            <div class="flex items-center gap-3">
                                <i class="ri-flask-line text-amber-600 text-xl"></i>
                                <div>
                                    <div class="font-semibold text-amber-800">黄金测试集 (Gold Set)</div>
                                    <div class="text-sm text-amber-700">建立 50-100 个标注好的问答对，作为回归测试基准。每次策略调整前跑一遍，确保不退化。</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 21: Agent Architecture -->
                <section>
                    <div class="slide-content">
                        <h2>Agent 架构设计（可选深入）</h2>
                        <p class="slide-desc">从简单对话到自主任务执行的演进</p>
                        
                        <div class="nordic-flow" style="margin-bottom: 2rem;">
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-brain-line"></i></div>
                                <div class="nordic-flow-title">推理 (Reasoning)</div>
                                <div class="nordic-flow-desc">理解任务目标</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-tools-line"></i></div>
                                <div class="nordic-flow-title">行动 (Acting)</div>
                                <div class="nordic-flow-desc">调用工具执行</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-eye-line"></i></div>
                                <div class="nordic-flow-title">观察 (Observing)</div>
                                <div class="nordic-flow-desc">获取执行结果</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-refresh-line"></i></div>
                                <div class="nordic-flow-title">迭代 (Iterating)</div>
                                <div class="nordic-flow-desc">循环直至完成</div>
                            </div>
                        </div>
                        
                        <div class="nordic-grid nordic-grid-3" style="gap: 1rem;">
                            <div class="nordic-card text-center p-4">
                                <div class="text-xs text-muted mb-1">策略模式</div>
                                <div class="font-semibold text-sm">Function Calling</div>
                                <div class="text-xs text-secondary mt-1">结构化工具调用</div>
                            </div>
                            <div class="nordic-card text-center p-4">
                                <div class="text-xs text-muted mb-1">策略模式</div>
                                <div class="font-semibold text-sm">ReAct</div>
                                <div class="text-xs text-secondary mt-1">推理与行动交替</div>
                            </div>
                            <div class="nordic-card text-center p-4">
                                <div class="text-xs text-muted mb-1">策略模式</div>
                                <div class="font-semibold text-sm">Plan & Execute</div>
                                <div class="text-xs text-secondary mt-1">先规划再执行</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 22: Knowledge Pipeline Deep Dive -->
                <section>
                    <div class="slide-content">
                        <h2>知识库 Pipeline 深度解析（可选深入）</h2>
                        <p class="slide-desc">从原始文档到可用记忆的完整流程</p>
                        
                        <div class="nordic-grid nordic-grid-2" style="gap: 1rem;">
                            <div class="nordic-card">
                                <div class="font-semibold text-sm mb-3"><i class="ri-database-2-line text-dify mr-2"></i>Ingest Pipeline</div>
                                <div class="pipeline-board">
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Parse</span>
                                        <span class="pipeline-step-meta">PDF / Markdown / HTML</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Chunking</span>
                                        <span class="pipeline-step-meta">Semantic / Markdown / Fixed</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Enrich Summary</span>
                                        <span class="pipeline-step-meta">补充摘要与元数据</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Embedding + Store</span>
                                        <span class="pipeline-step-meta">Milvus / Weaviate</span>
                                    </div>
                                </div>
                            </div>
                            <div class="nordic-card">
                                <div class="font-semibold text-sm mb-3"><i class="ri-search-line text-dify mr-2"></i>Query Pipeline</div>
                                <div class="pipeline-board">
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Query Rewrite</span>
                                        <span class="pipeline-step-meta">重写问题，增强召回</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Hybrid Search</span>
                                        <span class="pipeline-step-meta">Vector + BM25</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Rerank</span>
                                        <span class="pipeline-step-meta">排序最相关 Top-N</span>
                                    </div>
                                    <div class="pipeline-step">
                                        <span class="pipeline-step-label">Context Assembly</span>
                                        <span class="pipeline-step-meta">拼接上下文交给 LLM</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-3 text-center">
                            <span class="text-xs text-muted">Garbage In, Garbage Out —— 上游质量决定下游效果</span>
                        </div>
                    </div>
                </section>

                <!-- Slide 23: Security & Guardrails -->
                <section>
                    <div class="slide-content">
                        <h2>安全与护栏 (Guardrails)（可选深入）</h2>
                        <p class="slide-desc">保护应用免受滥用与攻击</p>
                        
                        <div class="nordic-grid nordic-grid-2">
                            <div class="nordic-card">
                                <h4 class="font-semibold mb-3"><i class="ri-shield-keyhole-line text-dify mr-2"></i>输入防护</h4>
                                <ul class="text-sm text-secondary space-y-1">
                                    <li>• 敏感词过滤与内容审核</li>
                                    <li>• Prompt 注入检测</li>
                                    <li>• 请求频率限制 (Rate Limit)</li>
                                    <li>• 用户身份验证与授权</li>
                                </ul>
                            </div>
                            <div class="nordic-card">
                                <h4 class="font-semibold mb-3"><i class="ri-shield-check-line text-dify mr-2"></i>输出防护</h4>
                                <ul class="text-sm text-secondary space-y-1">
                                    <li>• 幻觉检测与事实校验</li>
                                    <li>• PII 数据脱敏</li>
                                    <li>• 输出长度限制</li>
                                    <li>• 有害内容过滤</li>
                                </ul>
                            </div>
                        </div>
                        
                        <div class="warn-banner insight-row">
                            <i class="ri-alarm-warning-line info-banner-icon" style="color: var(--warning);"></i>
                            <div class="insight-row-content">
                                <div class="insight-title">预算护栏 (Budget Guardrails)</div>
                                <div class="insight-desc">设置单次请求 Token 上限、每日消费上限，防止成本失控。当触发阈值时自动降级或熔断。</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 24: Observability Deep Dive -->
                <section>
                    <div class="slide-content">
                        <h2>可观测性深度实践（可选深入）</h2>
                        <p class="slide-desc">从日志到指标，全链路追踪应用表现</p>
                        
                        <div class="nordic-grid nordic-grid-3" style="gap: 1.25rem;">
                            <div class="nordic-card text-center">
                                <i class="ri-file-list-3-line text-dify text-2xl mb-2 block"></i>
                                <h4 class="font-semibold text-sm mb-1">日志 (Logs)</h4>
                                <p class="text-xs text-secondary">执行轨迹、变量值、错误堆栈</p>
                            </div>
                            <div class="nordic-card text-center">
                                <i class="ri-bar-chart-box-line text-dify text-2xl mb-2 block"></i>
                                <h4 class="font-semibold text-sm mb-1">指标 (Metrics)</h4>
                                <p class="text-xs text-secondary">延迟、Token 消耗、成功率</p>
                            </div>
                            <div class="nordic-card text-center">
                                <i class="ri-route-line text-dify text-2xl mb-2 block"></i>
                                <h4 class="font-semibold text-sm mb-1">追踪 (Traces)</h4>
                                <p class="text-xs text-secondary">跨节点调用链、依赖关系</p>
                            </div>
                        </div>
                        
                        <div class="nordic-card mt-4">
                            <div class="font-semibold text-sm mb-2"><i class="ri-dashboard-line text-dify mr-2"></i>成本分析看板</div>
                            <div class="grid grid-cols-4 gap-4 text-center" style="font-size: 0.75rem;">
                                <div class="p-2 bg-gray-50 rounded">
                                    <div class="text-dify font-bold text-lg">1.2M</div>
                                    <div class="text-muted">总 Token 数</div>
                                </div>
                                <div class="p-2 bg-gray-50 rounded">
                                    <div class="text-dify font-bold text-lg">$42.5</div>
                                    <div class="text-muted">今日消费</div>
                                </div>
                                <div class="p-2 bg-gray-50 rounded">
                                    <div class="text-dify font-bold text-lg">2.3s</div>
                                    <div class="text-muted">P99 延迟</div>
                                </div>
                                <div class="p-2 bg-gray-50 rounded">
                                    <div class="text-dify font-bold text-lg">99.8%</div>
                                    <div class="text-muted">成功率</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 25: Debugging Tips -->
                <section>
                    <div class="slide-content">
                        <h2>调试技巧与故障排查（可选深入）</h2>
                        <p class="slide-desc">系统化定位与解决问题</p>
                        
                        <div class="nordic-grid nordic-grid-2">
                            <div>
                                <h4 class="font-semibold mb-3"><i class="ri-bug-line text-dify mr-2"></i>常见问题</h4>
                                <div class="space-y-2">
                                    <div class="p-2 bg-red-50 rounded text-sm">
                                        <span class="font-semibold text-red-700">超时错误</span>
                                        <span class="text-secondary">→ 检查 LLM 节点超时设置</span>
                                    </div>
                                    <div class="p-2 bg-orange-50 rounded text-sm">
                                        <span class="font-semibold text-orange-700">变量未找到</span>
                                        <span class="text-secondary">→ 检查节点输出变量名</span>
                                    </div>
                                    <div class="p-2 bg-yellow-50 rounded text-sm">
                                        <span class="font-semibold text-yellow-700">检索质量差</span>
                                        <span class="text-secondary">→ 调整分块策略或阈值</span>
                                    </div>
                                    <div class="p-2 bg-blue-50 rounded text-sm">
                                        <span class="font-semibold text-blue-700">API 限流</span>
                                        <span class="text-secondary">→ 添加重试或降级逻辑</span>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h4 class="font-semibold mb-3"><i class="ri-first-aid-kit-line text-dify mr-2"></i>排查步骤</h4>
                                <div class="space-y-2 text-sm">
                                    <div class="flex items-start gap-2">
                                        <span class="bg-dify text-white rounded-full w-5 h-5 flex items-center justify-center text-xs flex-shrink-0">1</span>
                                        <span>查看执行日志，定位错误节点</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="bg-dify text-white rounded-full w-5 h-5 flex items-center justify-center text-xs flex-shrink-0">2</span>
                                        <span>检查变量面板，验证数据流</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="bg-dify text-white rounded-full w-5 h-5 flex items-center justify-center text-xs flex-shrink-0">3</span>
                                        <span>使用预览模式，逐步执行测试</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="bg-dify text-white rounded-full w-5 h-5 flex items-center justify-center text-xs flex-shrink-0">4</span>
                                        <span>启用 Trace，查看详细调用链</span>
                                    </div>
                                    <div class="flex items-start gap-2">
                                        <span class="bg-dify text-white rounded-full w-5 h-5 flex items-center justify-center text-xs flex-shrink-0">5</span>
                                        <span>对比历史成功/失败执行差异</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Slide 26: Community Contribution -->
                <section data-background-color="#fafafa">
                    <div class="slide-hero">
                        <div class="mb-4">
                            <span class="section-tag">Community</span>
                        </div>
                        <h2>参与社区贡献（可选）</h2>
                        <p class="slide-subtitle">
                            从使用者成长为贡献者，共建开源生态。
                        </p>
                        
                        <div class="nordic-grid nordic-grid-3" style="margin-top: 2.5rem; gap: 1.25rem;">
                            <div class="nordic-card text-center">
                                <i class="ri-github-line text-dify text-3xl mb-3 block"></i>
                                <h4 class="font-semibold mb-2">贡献代码</h4>
                                <p class="text-sm text-secondary">提交 PR，修复 Bug，实现新功能</p>
                            </div>
                            <div class="nordic-card text-center">
                                <i class="ri-plug-line text-dify text-3xl mb-3 block"></i>
                                <h4 class="font-semibold mb-2">开发插件</h4>
                                <p class="text-sm text-secondary">为社区创建 Model/Tool/Agent 插件</p>
                            </div>
                            <div class="nordic-card text-center">
                                <i class="ri-translate-2 text-dify text-3xl mb-3 block"></i>
                                <h4 class="font-semibold mb-2">翻译文档</h4>
                                <p class="text-sm text-secondary">帮助文档多语言化，降低使用门槛</p>
                            </div>
                        </div>
                        
                        <div class="nordic-card mt-6">
                            <div class="flex items-center justify-center gap-8 text-sm">
                                <div class="flex items-center gap-2">
                                    <i class="ri-discord-line text-dify"></i>
                                    <span>Discord 社区</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="ri-github-line text-dify"></i>
                                    <span>GitHub Discussions</span>
                                </div>
                                <div class="flex items-center gap-2">
                                    <i class="ri-twitter-x-line text-dify"></i>
                                    <span>@dify_ai</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!-- Slide 27: Project 1 -->
                <section data-background-color="#fafafa">
                    <div class="slide-hero">
                        <div class="mb-4">
                            <span class="section-tag">Part 5</span>
                        </div>
                        <h2>实战项目一</h2>
                        <h3 class="slide-subheading">Apple Watch 录音转录工作流</h3>
                        <p class="slide-subtitle">
                            自动转录 Apple Watch 语音备忘录，生成结构化笔记并同步到 Notion。
                        </p>
                        
                        <div class="nordic-flow" style="margin-top: 2rem;">
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-mic-line"></i></div>
                                <div class="nordic-flow-title">语音输入</div>
                                <div class="nordic-flow-desc">Apple Watch</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-file-text-line"></i></div>
                                <div class="nordic-flow-title">Whisper 转录</div>
                                <div class="nordic-flow-desc">语音 → 文字</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-brain-line"></i></div>
                                <div class="nordic-flow-title">LLM 总结</div>
                                <div class="nordic-flow-desc">提取要点</div>
                            </div>
                            <div class="nordic-flow-step">
                                <div class="nordic-flow-number"><i class="ri-book-2-line"></i></div>
                                <div class="nordic-flow-title">同步 Notion</div>
                                <div class="nordic-flow-desc">结构化存储</div>
                            </div>
                        </div>
                    </div>
                    <aside class="notes">
                        案例页建议二选一深入，不要两个都展开。
                        准备提示：优先选择与现场听众行业更接近的案例；另一个用 30 秒带过。
                        Q&A 前留 3-4 分钟，强调“可复制模板”：输入规范、输出结构、失败兜底。
                    </aside>
                </section>

                <!-- Slide 28: Project 2 -->
                <section>
                    <div class="slide-content">
                        <h2>实战项目二</h2>
                        <h3 class="slide-subheading">GDPR 合规问答机器人</h3>
                        
                        <div class="nordic-grid nordic-grid-2">
                            <div class="nordic-card">
                                <h4 class="font-semibold mb-3"><i class="ri-database-line text-dify mr-2"></i>知识库构建</h4>
                                <ul class="text-sm text-secondary space-y-2">
                                    <li>• GDPR 官方文档</li>
                                    <li>• ICO 指南</li>
                                    <li>• 公司内部隐私政策</li>
                                    <li>• 数据处理协议</li>
                                </ul>
                            </div>
                            <div class="nordic-card">
                                <h4 class="font-semibold mb-3"><i class="ri-shield-check-line text-dify mr-2"></i>合规特性</h4>
                                <ul class="text-sm text-secondary space-y-2">
                                    <li>• 每回答必有来源引用</li>
                                    <li>• 置信度评分</li>
                                    <li>• 低置信度转人工</li>
                                    <li>• 免责声明自动追加</li>
                                </ul>
                            </div>
                        </div>
                        
                        <pre class="code-block mt-6" style="font-size: 0.58em;"><code>
chatbot:
  system_prompt: |
    你是 GDPR 合规助手。必须：
    1. 引用具体条款回答问题
    2. 标注置信度 (高/中/低)
    3. 复杂情况建议咨询法务
    4. 不提供法律意见，仅提供信息
  guardrails:
    confidence_threshold: 0.6
    fallback: "需要更多上下文，将为您转接人工。"
                        </code></pre>
                    </div>
                </section>
            </section>

            <!-- Slide 29: Resources -->
            <section>
                <div class="slide-content">
                    <h2>学习资源</h2>
                    
                    <div class="nordic-grid nordic-grid-3" style="gap: 1.5rem;">
                        <div class="nordic-card text-center">
                            <i class="ri-book-open-line text-dify text-3xl mb-4 block"></i>
                            <h3 class="font-semibold mb-2">官方文档</h3>
                            <p class="text-sm text-secondary mb-3">docs.dify.ai</p>
                            <a href="https://docs.dify.ai" target="_blank" class="text-dify text-sm hover:underline">访问 →</a>
                        </div>
                        <div class="nordic-card text-center">
                            <i class="ri-github-fill text-dify text-3xl mb-4 block"></i>
                            <h3 class="font-semibold mb-2">GitHub</h3>
                            <p class="text-sm text-secondary mb-3">github.com/langgenius/dify</p>
                            <a href="https://github.com/langgenius/dify" target="_blank" class="text-dify text-sm hover:underline">Star →</a>
                        </div>
                        <div class="nordic-card text-center">
                            <i class="ri-discord-fill text-dify text-3xl mb-4 block"></i>
                            <h3 class="font-semibold mb-2">社区讨论</h3>
                            <p class="text-sm text-secondary mb-3">Discord Community</p>
                            <a href="https://discord.gg/8Tpq4AcN" target="_blank" class="text-dify text-sm hover:underline">加入 →</a>
                        </div>
                    </div>
                    
                    <div class="nordic-card mt-8 text-center">
                        <h3 class="font-semibold mb-4">后续步骤</h3>
                        <div class="flex justify-center gap-8 text-sm">
                            <div class="flex items-center gap-2">
                                <i class="ri-checkbox-circle-line text-green-600"></i>
                                <span>加入 Discord 社区</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="ri-checkbox-circle-line text-green-600"></i>
                                <span>Star GitHub 仓库</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="ri-checkbox-circle-line text-green-600"></i>
                                <span>部署你的第一个实例</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <i class="ri-checkbox-circle-line text-green-600"></i>
                                <span>分享你的工作流</span>
                            </div>
                        </div>
                    </div>
                </div>
                <aside class="notes">
                    收尾动作：
                    1) 复述今天的三条主线：Workflow、Knowledge、Production。
                    2) 给出会后 7 天可执行任务：部署实例、做一个最小工作流、提交一次社区反馈。
                    3) 引导听众扫码或点击链接，不要只停留在口头邀请。
                </aside>
            </section>

            <!-- Slide 30: Thank You -->
            <section data-background-color="#0033ff">
                <div class="slide-hero text-center" style="color: white;">
                    <div style="font-size: 4rem; margin-bottom: 2rem;">🙏</div>
                    <h1 style="color: white; font-size: 3rem;">感谢参与</h1>
                    <p style="color: rgba(255,255,255,0.8); font-size: 1.1rem; margin-top: 1rem;">
                        有问题？欢迎随时联系
                    </p>
                    <div style="margin-top: 3rem; font-size: 1rem; color: rgba(255,255,255,0.9);">
                        <div style="font-weight: 600;">CrazyWoola (Banana)</div>
                        <div style="margin-top: 0.5rem; font-size: 0.9rem;">banana@dify.ai</div>
                        <div style="margin-top: 1.5rem; font-size: 0.8rem; opacity: 0.7;">
                            Dify Developer Relations
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/dist/reveal.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/highlight/highlight.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/reveal.js@4.5.0/plugin/notes/notes.js"></script>
    <script>
        // Tailwind config
        window.tailwind = window.tailwind || {};
        window.tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        dify: '#0033ff',
                        'dify-light': 'rgba(0, 51, 255, 0.06)',
                    },
                },
            },
        };
        
        // Reveal initialization
        Reveal.initialize({
            hash: true,
            controls: true,
            controlsLayout: 'edges',
            progress: true,
            center: true,
            width: 1200,
            height: 750,
            transition: 'slide',
            backgroundTransition: 'fade',
            plugins: [RevealHighlight, RevealNotes],
        });
    </script>
</body>
</html>
